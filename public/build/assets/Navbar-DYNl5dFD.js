import{c as V,r as s,j as e,m,C as K,A as j,L as i,G as P,u as G,a as Q,V as W,b as C,U as R,S as _,N as T,e as A,X as D,B as I,w as X,W as Y}from"./main-CDpjnf0A.js";import{C as J}from"./chevron-right-DosvBqfh.js";import{f as Z}from"./fdcLogo-f80feX95.js";import{S as H}from"./shopping-bag-pbUOk84f.js";import{L as q,K as z,M as ee}from"./menu-MWj0wWOx.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=V("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),L=({title:k,items:N,handleNavigation:u,isMobile:o=!1})=>{const[h,p]=s.useState(!1),y=s.useRef(null),w=s.useRef(null),c=s.useRef(null),f=()=>p(!h),x=s.useCallback(()=>{c.current&&clearTimeout(c.current),p(!0)},[]),d=s.useCallback(()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{p(!1)},150)},[]);s.useEffect(()=>{const l=g=>{y.current&&!y.current.contains(g.target)&&w.current&&!w.current.contains(g.target)&&p(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const v={hidden:{opacity:0,y:-10,scale:.95,transition:{duration:.2,ease:"easeOut"}},visible:{opacity:1,y:0,scale:1,transition:{duration:.3,ease:"easeIn"}}},S={hidden:{opacity:0,height:0,transition:{duration:.2,ease:"easeOut"}},visible:{opacity:1,height:"auto",transition:{duration:.3,ease:"easeIn"}}};return e.jsxs("li",{className:`${o?"w-full":"relative group"}`,"aria-haspopup":"true","aria-expanded":h,onMouseEnter:o?void 0:x,onMouseLeave:o?void 0:d,children:[e.jsxs("button",{ref:w,onClick:o?f:void 0,onFocus:o?void 0:x,onBlur:o?void 0:d,className:`flex items-center justify-between w-full focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-md
                    ${o?"text-gray-800 hover:text-indigo-600 dark:text-gray-200 dark:hover:text-indigo-400 text-xl font-semibold py-3 px-2":"text-gray-700 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400 text-lg font-medium transition-colors relative py-2 px-3"}`,children:[e.jsx("span",{children:k}),o?e.jsx(m.div,{animate:{rotate:h?90:0},transition:{duration:.2},children:e.jsx(J,{className:"w-6 h-6 text-gray-500 dark:text-gray-400"})}):e.jsx(m.div,{animate:{rotate:h?180:0},transition:{duration:.2},children:e.jsx(K,{className:"w-5 h-5 ml-2 text-gray-500 dark:text-gray-400"})})]}),!o&&e.jsx("span",{className:"absolute left-0 bottom-0 w-full h-[3px] bg-indigo-600 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left rounded-full"}),e.jsx(j,{children:h&&e.jsx(m.ul,{ref:y,variants:o?S:v,initial:"hidden",animate:"visible",exit:"hidden",onMouseEnter:o?void 0:x,onMouseLeave:o?void 0:d,className:`z-50 overflow-hidden
                            ${o?"pl-4 mt-2 space-y-2":"absolute top-full left-1/2 -translate-x-1/2 mt-4 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md rounded-xl shadow-2xl py-3 w-64 border border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out"}`,role:"menu",children:N.map((l,g)=>e.jsx(m.li,{whileHover:{scale:1.02,x:o?0:5},transition:{type:"spring",stiffness:400,damping:20},className:`
                                    ${o?"":"hover:bg-indigo-50 dark:hover:bg-gray-700/50 rounded-lg mx-2 transition-colors duration-200"}`,role:"menuitem",children:e.jsxs(i,{to:l.link,className:`flex items-center p-3 text-gray-800 dark:text-gray-200
                                        ${o?"text-lg font-medium":"text-base font-normal"}`,onClick:()=>{u(l.link),p(!1)},children:[l.icon&&P.createElement(l.icon,{className:"w-6 h-6 mr-3 text-gray-500 dark:text-gray-400"}),l.image&&typeof l.image=="string"&&e.jsx("img",{src:l.image,alt:l.name,className:"w-7 h-7 object-cover rounded-full mr-3 shadow-sm"}),e.jsx("span",{children:l.name})]})},g))})})]})},ie=()=>{const k=G(),N=Q(),[u,o]=s.useState(!1),[h,p]=s.useState(!1),[y,w]=s.useState([]),[c,f]=s.useState(""),[x,d]=s.useState([]),[v,S]=s.useState(!1),l=s.useRef(null),g=s.useRef(null),[B,ae]=s.useState(localStorage.getItem("theme")==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches);s.useEffect(()=>{document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")},[B]);const{totalCartItems:b,toggleCart:E}=W(),n=t=>{d([]),f(""),k(t)};s.useEffect(()=>{const t=()=>{p(window.scrollY>50)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),s.useEffect(()=>{u&&o(!1)},[N.pathname]),s.useEffect(()=>{C.get("/api/getCategory").then(t=>{if(t.data.status===200){const r=t.data.category.map(a=>({name:a.name,link:`/collections/${a.link}`,image:a.image?`/${a.image}`:`https://placehold.co/180x180/e0e0e0/555555?text=${a.name}`}));w(r)}else console.error("Unable to fetch categories for Navbar.")}).catch(t=>{console.error("Network or server error fetching categories:",t)})},[]);const M=async t=>{t.preventDefault();const r=N.pathname;try{await C.get("/sanctum/csrf-cookie");const a=await C.post("/api/logout");a.data.status===200?(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_name"),localStorage.removeItem("auth_email"),localStorage.removeItem("role"),I.success(a.data.message||"Logged out successfully!")):(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_name"),localStorage.removeItem("auth_email"),localStorage.removeItem("role"),I.success("User logout successful (local data cleared)."))}catch(a){console.error("Logout request failed:",a),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_name"),localStorage.removeItem("auth_email"),localStorage.removeItem("role"),I.success("Logout successful (due to network error or unhandled backend response).")}finally{k(r),o(!1)}},F=localStorage.getItem("auth_token")?e.jsxs(e.Fragment,{children:[e.jsxs(i,{to:"/user/orders",onClick:()=>n("/user/orders"),className:"flex items-center text-cyan-400 hover:text-cyan-300 transition-colors py-2 px-3 rounded-full hover:bg-gray-950",title:"My Orders",children:[e.jsx(H,{className:"w-5 h-5 mr-1"}),e.jsx("span",{className:"hidden lg:inline",children:"My Orders"})]}),e.jsxs("button",{onClick:M,className:"flex items-center text-red-400 hover:text-red-500 transition-colors py-2 px-3 rounded-full hover:bg-gray-950",title:"Log Out",children:[e.jsx(q,{className:"w-5 h-5 mr-1"}),e.jsx("span",{className:"hidden lg:inline",children:"Logout"})]})]}):e.jsxs(i,{to:"/login",onClick:()=>n("/login"),className:"flex items-center text-cyan-400 hover:text-cyan-300 transition-colors py-2 px-3 rounded-full hover:bg-gray-950",title:"Log In",children:[e.jsx(R,{className:"w-5 h-5 mr-1"}),e.jsx("span",{className:"hidden lg:inline",children:"Login"})]}),U=localStorage.getItem("role")==="admin"&&e.jsxs(i,{to:"/admin/dashboard",onClick:()=>n("/admin/dashboard"),className:"flex items-center text-purple-400 hover:text-purple-300 transition-colors py-2 px-3 rounded-full hover:bg-gray-950",title:"Admin Dashboard",children:[e.jsx(z,{className:"w-5 h-5 mr-1"}),e.jsx("span",{className:"hidden lg:inline",children:"Admin"})]}),$=async t=>{const r=t.target.value;if(f(r),r.trim().length>2){S(!0);try{const a=await C.get("/api/search",{params:{query:r},headers:{Accept:"application/json"}});a.data.status===200&&a.data.products&&a.data.products.length>0?d(a.data.products):d([])}catch(a){console.error("Search error:",a),d([])}finally{S(!1)}}else d([])};s.useEffect(()=>{const t=r=>{l.current&&!l.current.contains(r.target)&&(d([]),f(""))};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),s.useEffect(()=>(document.body.style.overflow=u?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[u]),s.useEffect(()=>{const t=r=>{const a=document.querySelector('[aria-label="Toggle Menu"]');u&&g.current&&!g.current.contains(r.target)&&(!a||!a.contains(r.target))&&o(!1)};return u?document.addEventListener("mousedown",t):document.removeEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[u]);const O=[{name:"Track Order",link:"/track-order",icon:X},{name:"Contact",link:"/contact",icon:Y},{name:"FAQ",link:"support/faq",icon:te}];return e.jsx("nav",{className:`fixed top-0 z-50 w-full transition-all duration-300 ease-in-out
            ${h?"bg-gray-900/90 shadow-xl py-3 backdrop-blur-md":"bg-gray-950 py-4"}`,children:e.jsxs("div",{className:"container mx-auto px-4 flex items-center justify-between",children:[e.jsx(i,{to:"/",onClick:()=>n("/"),className:"flex-shrink-0",children:e.jsx("img",{src:Z,alt:"First Digit Communications",className:"h-10 w-15 sm:h-12 sm:w-15 filter brightness-150"})}),e.jsxs("ul",{className:"hidden lg:flex items-center space-x-8 mx-auto",children:[e.jsx("li",{children:e.jsxs(i,{to:"/",onClick:()=>n("/"),className:"text-gray-300 hover:text-cyan-400 text-lg font-medium transition-colors relative group",children:["Home",e.jsx("span",{className:"absolute left-0 bottom-0 w-full h-[2px] bg-cyan-400 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"})]})}),e.jsx("li",{children:e.jsxs(i,{to:"/shop",onClick:()=>n("/shop"),className:"text-gray-300 hover:text-cyan-400 text-lg font-medium transition-colors relative group",children:["Shop",e.jsx("span",{className:"absolute left-0 bottom-0 w-full h-[2px] bg-cyan-400 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"})]})}),e.jsx(L,{title:"Categories",items:y,handleNavigation:n,isMobile:!1}),e.jsx(L,{title:"Help",items:O,handleNavigation:n,isMobile:!1})]}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("input",{type:"text",value:c,onChange:$,placeholder:"Search products...",className:"p-2 pl-10 rounded-full bg-gray-950 border border-gray-900 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-600 w-52 transition-all duration-300 ease-in-out text-sm placeholder-gray-400"}),e.jsx(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),v&&e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(T,{})}),e.jsxs(j,{children:[x.length>0&&c.length>1&&e.jsx(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute top-full left-0 right-0 mt-2 bg-gray-950 shadow-lg rounded-lg border border-gray-900 max-h-60 overflow-y-auto z-10",children:e.jsx("ul",{children:x.map(t=>{var r;return e.jsx("li",{className:"p-3 hover:bg-gray-900 cursor-pointer border-b border-gray-900 last:border-b-0",children:e.jsx(i,{to:`/collections/${((r=t.category)==null?void 0:r.link)||"default-category"}/${t.link}`,className:"block text-gray-200 text-sm",onClick:()=>{var a;f(""),d([]),n(`/collections/${((a=t.category)==null?void 0:a.link)||"default-category"}/${t.link}`)},children:t.name})},t.id)})})}),c.length>1&&!v&&x.length===0&&e.jsx(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute top-full left-0 right-0 mt-2 bg-gray-950 shadow-lg rounded-lg border border-gray-900 p-3 text-center text-gray-500 text-sm z-10",children:"No products found."})]})]}),e.jsxs("button",{onClick:E,className:"relative text-gray-300 hover:text-lime-400 transition-colors p-2 rounded-full hover:bg-gray-950",title:"Shopping Cart",children:[e.jsx(A,{className:"w-6 h-6"}),b>0&&e.jsxs(j,{children:[" ",e.jsx(m.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:500,damping:30},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:b},b)]})]}),F,U]}),e.jsxs("div",{className:"flex items-center lg:hidden space-x-4",children:[e.jsxs("button",{onClick:E,className:"relative text-gray-300 hover:text-lime-400 transition-colors",title:"Shopping Cart",children:[e.jsx(A,{className:"w-6 h-6"}),b>0&&e.jsx(j,{children:e.jsx(m.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:500,damping:30},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:b},b+"_mobile")})]}),e.jsx("button",{onClick:()=>o(!u),"aria-label":"Toggle Menu",className:"text-gray-300 hover:text-cyan-400 transition-colors",children:u?e.jsx(D,{className:"w-7 h-7"}):e.jsx(ee,{className:"w-7 h-7"})})]}),e.jsx(j,{children:u&&e.jsxs(m.div,{ref:g,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{duration:.3,ease:"easeInOut"},className:"fixed top-0 right-0 min-h-screen w-full bg-gray-950 flex flex-col pt-20 px-6 pb-1 overflow-y-auto shadow-xl lg:hidden z-40",children:[e.jsxs("div",{className:"absolute top-4 right-4 z-50",children:[" ",e.jsx("button",{onClick:()=>o(!1),"aria-label":"Close Menu",className:"text-gray-300 hover:text-white transition-colors",children:e.jsx(D,{className:"w-8 h-8"})})]}),e.jsxs("ul",{className:"flex flex-col space-y-6 mt-8 flex-grow",children:[e.jsx("li",{children:e.jsx(i,{to:"/",onClick:()=>n("/"),className:"block text-gray-200 hover:text-cyan-400 text-xl font-semibold py-2",children:"Home"})}),e.jsx("li",{children:e.jsx(i,{to:"/shop",onClick:()=>n("/shop"),className:"block text-gray-200 hover:text-cyan-400 text-xl font-semibold py-2",children:"Shop"})}),e.jsx(L,{title:"Categories",items:y,handleNavigation:n,isMobile:!0}),e.jsx(L,{title:"Help",items:O,handleNavigation:n,isMobile:!0}),e.jsxs("li",{className:"relative w-full mt-6",children:[e.jsx("input",{type:"text",value:c,onChange:$,placeholder:"Search products...",className:"w-full p-3 pl-12 border border-gray-900 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-600 bg-gray-950 text-gray-200 placeholder-gray-400","aria-label":"Mobile Search Input"}),e.jsx(_,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-500"}),v&&e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:e.jsx(T,{})}),e.jsxs(j,{children:[x.length>0&&c.length>1&&e.jsx(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"mt-2 bg-gray-950 rounded-md shadow-lg p-1 max-h-40 overflow-y-auto",children:x.map(t=>{var r;return e.jsx("div",{className:"border-b border-gray-900 py-2 last:border-b-0",children:e.jsx(i,{to:`/collections/${((r=t.category)==null?void 0:r.link)||"default-category"}/${t.link}`,onClick:()=>{var a;d([]),f(""),n(`/collections/${((a=t.category)==null?void 0:a.link)||"default-category"}/${t.link}`)},children:e.jsx("span",{className:"block text-gray-200 text-sm hover:text-cyan-400",children:t.name})})},t.id)})}),c.length>1&&!v&&x.length===0&&e.jsx(m.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"text-center text-gray-500 mt-4",children:"No products found."})]})]})]}),e.jsxs("div",{className:"mt-auto border-t border-gray-900 pt-2 flex flex-col space-y-3",children:[localStorage.getItem("auth_token")?e.jsxs(e.Fragment,{children:[e.jsxs(i,{to:"/user/orders",onClick:()=>n("/user/orders"),className:"flex items-center text-purple-400 hover:text-purple-300 transition-colors py-2 px-3 rounded-full hover:bg-gray-950 text-xl font-semibold w-fit",children:[e.jsx(H,{className:"w-6 h-6 mr-2"}),e.jsx("span",{children:"My Orders"})]}),e.jsxs("button",{onClick:M,className:"flex items-center text-red-400 hover:text-red-500 transition-colors py-2 px-3 rounded-full hover:bg-gray-950 text-xl font-semibold w-fit",children:[e.jsx(q,{className:"w-6 h-6 mr-2"}),e.jsx("span",{children:"Logout"})]})]}):e.jsxs(i,{to:"/login",onClick:()=>n("/login"),className:"flex items-center text-cyan-400 hover:text-cyan-300 transition-colors py-2 px-3 rounded-full hover:bg-gray-950 text-xl font-semibold w-fit",children:[e.jsx(R,{className:"w-6 h-6 mr-2"}),e.jsx("span",{children:"Login"})]}),localStorage.getItem("role")==="admin"&&e.jsxs(i,{to:"/admin/dashboard",onClick:()=>n("/admin/dashboard"),className:"flex items-center text-purple-400 hover:text-purple-300 transition-colors py-2 px-3 rounded-full hover:bg-gray-950 text-xl font-semibold w-fit",children:[e.jsx(z,{className:"w-6 h-6 mr-2"}),e.jsx("span",{children:"Admin"})]}),e.jsx("div",{className:"flex items-center py-8 px-3 w-fit"})]})]})})]})})};export{ie as default};
