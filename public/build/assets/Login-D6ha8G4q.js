import{c as L,u as I,r as d,j as a,m as l,M as _,E as z,J as P,L as O,b as g,B as t}from"./main-BOab8pwY.js";import{L as C,E as F}from"./lock-CsRZ5mv7.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=L("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),D=()=>{document.title="Login - First Digit";const p=I(),[x,c]=d.useState(!1),[r,f]=d.useState({email:"",password:""}),[o,s]=d.useState({}),[n,v]=d.useState(!1),h=i=>{f({...r,[i.target.name]:i.target.value}),s({})},w=()=>{v(!n)},j=i=>{i.preventDefault(),c(!0);const E={email:r.email,password:r.password};g.get("/sanctum/csrf-cookie").then(y=>{g.post("/api/login",E).then(e=>{e.data.status===200?(localStorage.setItem("auth_token",e.data.token),localStorage.setItem("auth_name",e.data.username),localStorage.setItem("auth_email",e.data.email),localStorage.setItem("role",e.data.role),g.defaults.headers.common.Authorization=`Bearer ${e.data.token}`,t.success(e.data.message),e.data.role==="admin"?p("/admin/dashboard"):p("/")):e.data.status===401?(t.error(e.data.message),s({general:e.data.message})):(s(e.data.validation_errors||{}),e.data.validation_errors?Object.values(e.data.validation_errors).forEach(u=>{u.forEach(m=>t.error(m))}):t.error("An unexpected error occurred."))}).catch(e=>{e.response&&e.response.status===422?(s(e.response.data.validation_errors||{}),Object.values(e.response.data.validation_errors).forEach(u=>{u.forEach(m=>t.error(m))})):e.response&&e.response.data&&e.response.data.message?(t.error(e.response.data.message),s({general:e.response.data.message})):(t.error("Something went wrong. Please try again later."),s({general:"Network error or unexpected issue."}),console.error("Error details:",e.response||e))}).finally(()=>{c(!1)})}).catch(y=>{c(!1),t.error("Failed to prepare login. Please try again later."),s({general:"CSRF token error."}),console.error("CSRF Error:",y)})},N={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},k={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.5,ease:"easeOut",delay:.2}}},b={hidden:{x:-20,opacity:0},visible:{x:0,opacity:1,transition:{duration:.4,ease:"easeOut"}}},S={hover:{scale:1.02,boxShadow:"0px 8px 15px rgba(0, 0, 0, 0.3)"},tap:{scale:.98}};return a.jsxs(l.div,{className:"flex items-center justify-center min-h-screen p-5 relative overflow-hidden",style:{backgroundImage:"linear-gradient(to bottom right, #0a0a0a, #1a1a1a, #0a0a0a)"},variants:N,initial:"hidden",animate:"visible",children:[a.jsx("div",{className:"absolute top-[10%] left-[5%] w-72 h-72 bg-cyan-500/10 rounded-full blur-3xl opacity-30"}),a.jsx("div",{className:"absolute bottom-[15%] right-[10%] w-80 h-80 bg-purple-500/10 rounded-full blur-3xl opacity-30"}),a.jsxs(l.div,{className:"bg-gray-900 p-8 md:p-10 rounded-xl shadow-2xl border border-gray-700 w-full max-w-md relative z-10",variants:k,initial:"hidden",animate:"visible",children:[a.jsx("h1",{className:"text-4xl font-extrabold text-center text-lime-400 mb-8 drop-shadow-md",children:"Welcome Back!"}),a.jsx("p",{className:"text-center text-gray-400 mb-8 text-lg",children:"Log in to continue your shopping journey."}),a.jsxs("form",{onSubmit:j,className:"flex flex-col space-y-6",children:[a.jsxs(l.div,{className:"relative",variants:b,children:[a.jsx(_,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",size:20}),a.jsx("input",{type:"email",name:"email",placeholder:"Your Email","aria-label":"Email",onChange:h,value:r.email,className:"pl-12 pr-4 py-3 bg-gray-800 border border-gray-700 rounded-lg w-full text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600 transition-colors",required:!0}),o.email&&a.jsx("small",{className:"text-red-400 mt-1 block",children:o.email[0]})]}),a.jsxs(l.div,{className:"relative",variants:b,children:[a.jsx(C,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",size:20}),a.jsx("input",{type:n?"text":"password",name:"password",placeholder:"Your Password","aria-label":"Password",onChange:h,value:r.password,className:"pl-12 pr-12 py-3 bg-gray-800 border border-gray-700 rounded-lg w-full text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-600 transition-colors",required:!0}),a.jsx("button",{type:"button",onClick:w,className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-400 transition-colors focus:outline-none","aria-label":n?"Hide password":"Show password",children:n?a.jsx(F,{size:20}):a.jsx(z,{size:20})}),o.password&&a.jsx("small",{className:"text-red-400 mt-1 block",children:o.password[0]})]}),o.general&&a.jsx("small",{className:"text-red-400 text-center mt-2 block",children:o.general}),a.jsx(l.button,{type:"submit",className:"flex items-center justify-center bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition-colors w-full focus:outline-none focus:ring-2 focus:ring-blue-500 active:scale-98 shadow-lg",disabled:x,variants:S,whileHover:"hover",whileTap:"tap",children:x?a.jsx(P,{}):a.jsxs(a.Fragment,{children:[a.jsx(V,{className:"mr-2",size:20})," Login"]})})]}),a.jsxs("p",{className:"text-center mt-6 text-gray-400",children:["Don't have an account?"," ",a.jsx(O,{to:"/register",className:"text-blue-400 hover:underline font-semibold",children:"Register Now"})]})]})]})};export{D as default};
