import{r as a,j as e,m as u,C as H,A as j,L as l,u as K,a as P,J as V,b as k,B as N,U as O,G as $,S as R,X as _}from"./main-CysGwbvy.js";import{C as G}from"./chevron-right-CPVDavcB.js";import{f as J}from"./fdcLogo-BQvQcg2t.js";import{S as A}from"./shopping-bag-CEfQos_v.js";import{L as D,K as z,S as T,M as X}from"./search-DIkDWsiI.js";const q=({title:w,items:S,links:n,handleNavigation:p,isMobile:i=!1})=>{const[f,x]=a.useState(!1),v=a.useRef(null),c=a.useRef(null),y=()=>x(!f);a.useEffect(()=>{const m=h=>{v.current&&!v.current.contains(h.target)&&c.current&&!c.current.contains(h.target)&&x(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const g={hidden:{opacity:0,y:-10,x:i?"100%":0,transition:{duration:.2}},visible:{opacity:1,y:0,x:0,transition:{duration:.3}}},d={hidden:{opacity:0,height:0,transition:{duration:.2,ease:"easeOut"}},visible:{opacity:1,height:"auto",transition:{duration:.3,ease:"easeIn"}}};return e.jsxs("li",{className:`${i?"w-full":"relative group"}`,"aria-haspopup":"true","aria-expanded":f,children:[e.jsxs("button",{ref:c,onClick:y,className:`flex items-center justify-between w-full
                    ${i?"text-gray-800 hover:text-indigo-600 dark:text-gray-200 dark:hover:text-indigo-400 text-xl font-semibold py-2":"text-gray-700 hover:text-indigo-600 dark:text-gray-300 dark:hover:text-indigo-400 text-lg font-medium transition-colors relative"}`,children:[e.jsx("span",{children:w}),i?e.jsx(u.div,{animate:{rotate:f?90:0},transition:{duration:.2},children:e.jsx(G,{className:"w-6 h-6"})}):e.jsx(u.div,{animate:{rotate:f?180:0},transition:{duration:.2},children:e.jsx(H,{className:"w-5 h-5 ml-1"})})]}),!i&&e.jsx("span",{className:"absolute left-0 bottom-0 w-full h-[2px] bg-indigo-600 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"}),e.jsx(j,{children:f&&e.jsx(u.ul,{ref:v,variants:i?d:g,initial:"hidden",animate:"visible",exit:"hidden",className:`z-50
                            ${i?"pl-4 mt-2 space-y-2":"absolute top-full left-0 mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg py-2 w-48 border border-gray-200 dark:border-gray-700"}`,role:"menu",children:S.map((m,h)=>e.jsx("li",{className:`${i?"":"hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md"}`,role:"menuitem",children:e.jsx(l,{to:n[h],className:`block py-2 px-4 text-gray-800 dark:text-gray-200
                                        ${i?"text-lg":"text-base"}`,onClick:()=>{p(n[h]),x(!1)},children:m})},h))})})]})},ae=()=>{const w=K(),S=P(),[n,p]=a.useState(!1),[i,f]=a.useState(!1),[x,v]=a.useState([]),[c,y]=a.useState(""),[g,d]=a.useState([]),[m,h]=a.useState(!1),C=a.useRef(null),L=a.useRef(null),[B,Y]=a.useState(localStorage.getItem("theme")==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches);a.useEffect(()=>{document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")},[B]);const{totalCartItems:b,toggleCart:I}=V(),o=t=>{p(!1),d([]),y(""),w(t)};a.useEffect(()=>{const t=()=>{f(window.scrollY>50)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)},[]),a.useEffect(()=>{k.get("/api/getCategory").then(t=>{t.data.status===200?v(t.data.category):N.error("Unable to fetch categories for Navbar.")}).catch(t=>{console.error("Network or server error fetching categories:",t),N.error("Error fetching categories for Navbar.")})},[]);const E=async t=>{t.preventDefault();const r=S.pathname;try{await k.get("/sanctum/csrf-cookie");const s=await k.post("/api/logout");s.data.status===200?(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_name"),localStorage.removeItem("auth_email"),localStorage.removeItem("role"),N.success(s.data.message||"Logged out successfully!")):(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_name"),localStorage.removeItem("auth_email"),localStorage.removeItem("role"),N.success("User logout successful (local data cleared)."))}catch(s){console.error("Logout request failed:",s),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_name"),localStorage.removeItem("auth_email"),localStorage.removeItem("role"),N.success("Logout successful (due to network error or unhandled backend response).")}finally{w(r)}},U=localStorage.getItem("auth_token")?e.jsxs(e.Fragment,{children:[e.jsxs(l,{to:"/user/orders",onClick:()=>o("/user/orders"),className:"flex items-center text-cyan-400 hover:text-cyan-300 transition-colors py-2 px-3 rounded-full hover:bg-gray-800",title:"My Orders",children:[e.jsx(A,{className:"w-5 h-5 mr-1"}),e.jsx("span",{className:"hidden lg:inline",children:"My Orders"})]}),e.jsxs("button",{onClick:E,className:"flex items-center text-red-400 hover:text-red-500 transition-colors py-2 px-3 rounded-full hover:bg-gray-800",title:"Log Out",children:[e.jsx(D,{className:"w-5 h-5 mr-1"}),e.jsx("span",{className:"hidden lg:inline",children:"Logout"})]})]}):e.jsxs(l,{to:"/login",onClick:()=>o("/login"),className:"flex items-center text-cyan-400 hover:text-cyan-300 transition-colors py-2 px-3 rounded-full hover:bg-gray-800",title:"Log In",children:[e.jsx(O,{className:"w-5 h-5 mr-1"}),e.jsx("span",{className:"hidden lg:inline",children:"Login"})]}),F=localStorage.getItem("role")==="admin"&&e.jsxs(l,{to:"/admin/dashboard",onClick:()=>o("/admin/dashboard"),className:"flex items-center text-purple-400 hover:text-purple-300 transition-colors py-2 px-3 rounded-full hover:bg-gray-800",title:"Admin Dashboard",children:[e.jsx(z,{className:"w-5 h-5 mr-1"}),e.jsx("span",{className:"hidden lg:inline",children:"Admin"})]}),M=async t=>{const r=t.target.value;if(y(r),r.trim().length>2){h(!0);try{const s=await k.get("/api/search",{params:{query:r},headers:{Accept:"application/json"}});s.data.status===200&&s.data.products&&s.data.products.length>0?d(s.data.products):d([])}catch(s){console.error("Search error:",s),d([])}finally{h(!1)}}else d([])};return a.useEffect(()=>{const t=r=>{C.current&&!C.current.contains(r.target)&&(d([]),y(""))};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),a.useEffect(()=>(document.body.style.overflow=n?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[n]),a.useEffect(()=>{const t=r=>{const s=document.querySelector('[aria-label="Toggle Menu"]');n&&L.current&&!L.current.contains(r.target)&&(!s||!s.contains(r.target))&&p(!1)};return n?document.addEventListener("mousedown",t):document.removeEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[n]),e.jsx("nav",{className:`fixed top-0 z-50 w-full transition-all duration-300 ease-in-out
            ${i?"bg-gray-900/90 shadow-xl py-3 backdrop-blur-md":"bg-gray-950 py-4"}`,children:e.jsxs("div",{className:"container mx-auto px-4 flex items-center justify-between",children:[e.jsx(l,{to:"/",onClick:()=>o("/"),className:"flex-shrink-0",children:e.jsx("img",{src:J,alt:"First Digit Communications",className:"h-10 sm:h-12 filter brightness-150"})}),e.jsxs("ul",{className:"hidden lg:flex items-center space-x-8 mx-auto",children:[e.jsx("li",{children:e.jsxs(l,{to:"/",onClick:()=>o("/"),className:"text-gray-300 hover:text-cyan-400 text-lg font-medium transition-colors relative group",children:["Home",e.jsx("span",{className:"absolute left-0 bottom-0 w-full h-[2px] bg-cyan-400 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"})]})}),e.jsx("li",{children:e.jsxs(l,{to:"/shop",onClick:()=>o("/shop"),className:"text-gray-300 hover:text-cyan-400 text-lg font-medium transition-colors relative group",children:["Shop",e.jsx("span",{className:"absolute left-0 bottom-0 w-full h-[2px] bg-cyan-400 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"})]})}),e.jsx(q,{title:"Categories",items:x.map(t=>t.name),links:x.map(t=>`/collections/${t.link}`),handleNavigation:o,isMobile:!1})]}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",ref:C,children:[e.jsx("input",{type:"text",value:c,onChange:M,placeholder:"Search products...",className:"p-2 pl-10 rounded-full bg-gray-800 border border-gray-700 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-600 w-52 transition-all duration-300 ease-in-out text-sm placeholder-gray-400"}),e.jsx(T,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),m&&e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx($,{})}),e.jsxs(j,{children:[g.length>0&&c.length>2&&e.jsx(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 shadow-lg rounded-lg border border-gray-700 max-h-60 overflow-y-auto z-10",children:e.jsx("ul",{children:g.map(t=>{var r;return e.jsx("li",{className:"p-3 hover:bg-gray-700 cursor-pointer border-b border-gray-700 last:border-b-0",children:e.jsx(l,{to:`/collections/${((r=t.category)==null?void 0:r.link)||"default-category"}/${t.link}`,className:"block text-gray-200 text-sm",onClick:()=>{var s;y(""),d([]),o(`/collections/${((s=t.category)==null?void 0:s.link)||"default-category"}/${t.link}`)},children:t.name})},t.id)})})}),c.length>2&&!m&&g.length===0&&e.jsx(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 shadow-lg rounded-lg border border-gray-700 p-3 text-center text-gray-500 text-sm z-10",children:"No products found."})]})]}),e.jsxs("button",{onClick:I,className:"relative text-gray-300 hover:text-lime-400 transition-colors p-2 rounded-full hover:bg-gray-800",title:"Shopping Cart",children:[e.jsx(R,{className:"w-6 h-6"}),b>0&&e.jsxs(j,{children:[" ",e.jsx(u.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:500,damping:30},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:b},b)]})]}),U,F]}),e.jsxs("div",{className:"flex items-center lg:hidden space-x-4",children:[e.jsxs("button",{onClick:I,className:"relative text-gray-300 hover:text-lime-400 transition-colors",title:"Shopping Cart",children:[e.jsx(R,{className:"w-6 h-6"}),b>0&&e.jsx(j,{children:e.jsx(u.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:500,damping:30},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:b},b+"_mobile")})]}),e.jsx("button",{onClick:()=>p(!n),"aria-label":"Toggle Menu",className:"text-gray-300 hover:text-cyan-400 transition-colors",children:n?e.jsx(_,{className:"w-7 h-7"}):e.jsx(X,{className:"w-7 h-7"})})]}),e.jsx(j,{children:n&&e.jsxs(u.div,{ref:L,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{duration:.3,ease:"easeInOut"},className:"fixed top-0 right-0 min-h-screen w-full bg-gray-950 flex flex-col pt-20 px-6 pb-6 overflow-y-auto shadow-xl lg:hidden z-40",children:[e.jsxs("div",{className:"absolute top-4 right-4 z-50",children:[" ",e.jsx("button",{onClick:()=>p(!1),"aria-label":"Close Menu",className:"text-gray-300 hover:text-white transition-colors",children:e.jsx(_,{className:"w-8 h-8"})})]}),e.jsxs("ul",{className:"flex flex-col space-y-6 mt-8 flex-grow",children:[e.jsx("li",{children:e.jsx(l,{to:"/",onClick:()=>o("/"),className:"block text-gray-200 hover:text-cyan-400 text-xl font-semibold py-2",children:"Home"})}),e.jsx("li",{children:e.jsx(l,{to:"/shop",onClick:()=>o("/shop"),className:"block text-gray-200 hover:text-cyan-400 text-xl font-semibold py-2",children:"Shop"})}),e.jsx(q,{title:"Categories",items:x.map(t=>t.name),links:x.map(t=>`/collections/${t.link}`),handleNavigation:o,isMobile:!0}),e.jsxs("li",{className:"relative w-full mt-6",children:[e.jsx("input",{type:"text",value:c,onChange:M,placeholder:"Search products...",className:"w-full p-3 pl-12 border border-gray-700 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-600 bg-gray-800 text-gray-200 placeholder-gray-400","aria-label":"Mobile Search Input"}),e.jsx(T,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-500"}),m&&e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:e.jsx($,{})}),e.jsxs(j,{children:[g.length>0&&c.length>1&&e.jsx(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"mt-2 bg-gray-800 rounded-md shadow-lg p-1 max-h-40 overflow-y-auto",children:g.map(t=>{var r;return e.jsx("div",{className:"border-b border-gray-700 py-2 last:border-b-0",children:e.jsx(l,{to:`/collections/${((r=t.category)==null?void 0:r.link)||"default-category"}/${t.link}`,onClick:()=>{d([]),y(""),p(!1)},children:e.jsx("span",{className:"block text-gray-200 text-sm hover:text-cyan-400",children:t.name})})},t.id)})}),c.length>1&&!m&&g.length===0&&e.jsx(u.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"text-center text-gray-500 mt-4",children:"No products found."})]})]})]}),e.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-700 flex flex-col space-y-4",children:[localStorage.getItem("auth_token")?e.jsxs(e.Fragment,{children:[e.jsxs(l,{to:"/user/orders",onClick:()=>o("/user/orders"),className:"flex items-center text-purple-400 hover:text-purple-300 transition-colors py-2 px-3 rounded-full hover:bg-gray-800 text-xl font-semibold w-fit",children:[e.jsx(A,{className:"w-6 h-6 mr-2"}),e.jsx("span",{children:"My Orders"})]}),e.jsxs("button",{onClick:E,className:"flex items-center text-red-400 hover:text-red-500 transition-colors py-2 px-3 rounded-full hover:bg-gray-800 text-xl font-semibold w-fit",children:[e.jsx(D,{className:"w-6 h-6 mr-2"}),e.jsx("span",{children:"Logout"})]})]}):e.jsxs(l,{to:"/login",onClick:()=>o("/login"),className:"flex items-center text-cyan-400 hover:text-cyan-300 transition-colors py-2 px-3 rounded-full hover:bg-gray-800 text-xl font-semibold w-fit",children:[e.jsx(O,{className:"w-6 h-6 mr-2"}),e.jsx("span",{children:"Login"})]}),localStorage.getItem("role")==="admin"&&e.jsxs(l,{to:"/admin/dashboard",onClick:()=>o("/admin/dashboard"),className:"flex items-center text-purple-400 hover:text-purple-300 transition-colors py-2 px-3 rounded-full hover:bg-gray-800 text-xl font-semibold w-fit",children:[e.jsx(z,{className:"w-6 h-6 mr-2"}),e.jsx("span",{children:"Admin"})]})]})]})})]})})};export{ae as default};
