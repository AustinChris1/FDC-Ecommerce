import{c as de,r,j as e,m as n,L as I,A as xe,W as me,O as he,Y as ge,K as h,V as fe,b as E,B as _}from"./main-BOab8pwY.js";import{u as g}from"./index-CQZpIIuS.js";import{S as ue}from"./shopping-bag-e33B3ENP.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=de("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Q=s=>`â‚¦${parseFloat(s).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}`,b=({product:s,handleAddToCart:F,inView:l,customDelay:N})=>{var j,f;const[o,p]=r.useState(!1),d=s.original_price&&parseFloat(s.original_price)>parseFloat(s.selling_price)?Math.round((parseFloat(s.original_price)-parseFloat(s.selling_price))/parseFloat(s.original_price)*100):0,v=s.qty<=0||s.status===1,c=s.qty>0&&s.qty<=5;return e.jsxs(n.div,{className:"mx-auto w-full max-w-xs sm:max-w-sm md:max-w-md bg-gray-800 rounded-xl overflow-hidden shadow-2xl group relative transform hover:scale-103 transition-transform duration-300 ease-out border border-transparent hover:border-lime-600 flex flex-col",style:{maxWidth:"280px",maxHeight:"400px"},variants:{hidden:{opacity:0,scale:.9,y:30},visible:x=>({opacity:1,scale:1,y:0,transition:{delay:x*.08+N,duration:.5,ease:"easeOut"}})},initial:"hidden",animate:l?"visible":"hidden",custom:N,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[e.jsx(I,{to:`/collections/${((j=s.category)==null?void 0:j.link)||"default-category"}/${s.link}`,className:"block",children:e.jsxs("div",{className:"relative pt-[70%] overflow-hidden",children:[e.jsx(n.img,{src:s.image||`https://placehold.co/300x210/374151/9CA3AF?text=${s.name.substring(0,15)}`,alt:s.name,className:"absolute inset-0 w-full h-full object-cover opacity-100 transition-opacity duration-500 ease-out",initial:!1,animate:{opacity:o&&s.image2?0:1},onError:x=>{x.target.onerror=null,x.target.src=`https://placehold.co/300x210/374151/9CA3AF?text=${s.name.substring(0,15)}`}}),e.jsx(xe,{children:o&&s.image2&&e.jsx(n.img,{src:s.image2,alt:`${s.name} - alternate view`,className:"absolute inset-0 w-full h-full object-cover",initial:{y:"100%"},animate:{y:"0%"},exit:{y:"100%"},transition:{duration:.4,ease:"easeOut"}})}),d>0&&e.jsxs("span",{className:"absolute top-3 right-3 bg-green-600 text-white text-xs font-bold px-2.5 py-0.5 rounded-full shadow-lg",children:["-",d,"%"]}),v?e.jsx("span",{className:"absolute top-3 left-3 bg-red-600 text-white text-xs font-bold px-2.5 py-0.5 rounded-full shadow-lg",children:"Out of Stock"}):c&&e.jsxs("span",{className:"absolute top-3 left-3 bg-orange-500 text-white text-xs font-bold px-2.5 py-0.5 rounded-full shadow-lg",children:["Limited Stock (",s.qty,")"]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"})]})}),e.jsxs("div",{className:"p-3 flex flex-col flex-grow",children:[e.jsxs(I,{to:`/collections/${((f=s.category)==null?void 0:f.link)||"default-category"}/${s.link}`,className:"block",children:[e.jsx("h3",{className:"text-sm font-bold mb-1 text-white group-hover:text-lime-400 transition-colors duration-300 line-clamp-2",children:s.name}),e.jsx("p",{className:"text-gray-400 mb-2 text-xs line-clamp-2 min-h-[2rem]",children:s.description||"No description available."}),s.rating!==void 0&&s.num_reviews!==void 0&&e.jsxs("div",{className:"mb-2 flex items-center",children:[e.jsx(me,{rating:parseFloat(s.rating),iconSize:14})," ",e.jsxs("span",{className:"text-gray-400 text-xs ml-1",children:["(",s.num_reviews,")"]})]})]}),e.jsxs("div",{className:"mt-auto pt-2 border-t border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{children:[d>0&&e.jsx("p",{className:"text-xs text-gray-500 line-through",children:Q(s.original_price)}),e.jsxs("p",{className:`text-base font-bold ${c?"text-red-400":"text-cyan-400"}`,children:[" ",Q(s.selling_price)]})]}),e.jsx("button",{onClick:x=>{x.preventDefault(),F(s)},className:`p-2 rounded-lg font-semibold transition-all duration-300 flex items-center justify-center text-sm
                            ${v?"bg-gray-700 text-gray-400 cursor-not-allowed opacity-70":"bg-lime-600 text-white hover:bg-lime-700 active:scale-95 shadow-md"}`,disabled:v,"aria-label":`Add ${s.name} to cart`,children:e.jsx(ue,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-lime-500/10 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})]})},_e=()=>{const[s,F]=r.useState([]),[l,N]=r.useState([]),[o,p]=r.useState(!0),[d,v]=r.useState("All"),[c,j]=r.useState(1),f=8,{addToCart:x}=he(),{ref:X,inView:P}=g({triggerOnce:!0,threshold:.05}),{ref:Z,inView:A}=g({triggerOnce:!0,threshold:.05}),{ref:ee,inView:C}=g({triggerOnce:!0,threshold:.05}),{ref:te,inView:D}=g({triggerOnce:!0,threshold:.05}),{ref:se,inView:V}=g({triggerOnce:!0,threshold:.05}),{ref:ae,inView:$}=g({triggerOnce:!0,threshold:.05}),{ref:le,inView:S}=g({triggerOnce:!0,threshold:.05});r.useEffect(()=>{(async()=>{p(!0);try{const a=await E.get("/api/getCategory");a.data.status===200?F([{id:"All",name:"All",link:"all"},...a.data.category]):(_.error("Unable to fetch categories."),console.error("Backend error fetching categories:",a.data.message));const R=await E.get("/api/allProducts");if(R.data.status===200){const ie=R.data.products.map(async i=>{let Y=0,k=0;try{const y=await E.get(`/api/products/${i.id}/reviews`);y.data.status===200&&Array.isArray(y.data.reviews)&&(k=y.data.reviews.length,k>0&&(Y=(y.data.reviews.reduce((oe,ce)=>oe+parseFloat(ce.rating),0)/k).toFixed(1)))}catch(y){console.warn(`Could not fetch reviews for product ${i.name} (ID: ${i.id}):`,y)}const G=i.flash_sale_ends_at?new Date(i.flash_sale_ends_at):null,K=i.flash_sale_starts_at?new Date(i.flash_sale_starts_at):null,J=new Date,ne=i.is_flash_sale&&K&&G&&J>=K&&J<=G;return{...i,rating:parseFloat(Y),num_reviews:k,is_new_arrival:i.is_new_arrival||!1,is_flash_sale:ne||!1,flash_sale_price:i.flash_sale_price,flash_sale_starts_at:i.flash_sale_starts_at,flash_sale_ends_at:i.flash_sale_ends_at,original_price:i.original_price,selling_price:i.selling_price}}),re=await Promise.all(ie);N(re)}else _.error("Unable to fetch products."),console.error("Backend error fetching products:",R.data.message)}catch(a){console.error("Network or server error during data fetch:",a),_.error("Failed to load data. Please try again.")}finally{p(!1)}})()},[]);const w=r.useMemo(()=>l.filter(t=>t.is_flash_sale&&t.flash_sale_ends_at&&new Date(t.flash_sale_ends_at)>new Date&&t.qty>0).sort((t,a)=>new Date(t.flash_sale_ends_at).getTime()-new Date(a.flash_sale_ends_at).getTime()).slice(0,8),[l]),T=r.useMemo(()=>l.filter(t=>t.is_new_arrival&&t.qty>0).sort((t,a)=>new Date(a.created_at).getTime()-new Date(t.created_at).getTime()).slice(0,8),[l]),M=r.useMemo(()=>l.filter(t=>t.popular===1&&t.qty>0).sort((t,a)=>a.sales_count-t.sales_count).slice(0,8),[l]),L=r.useMemo(()=>l.filter(t=>t.featured===1&&t.qty>0).slice(0,8),[l]),B=r.useMemo(()=>l.filter(t=>t.qty>0&&t.qty<=5).slice(0,4),[l]),H=r.useMemo(()=>{if(w.length===0)return null;const t=w.map(a=>new Date(a.flash_sale_ends_at).getTime()).filter(a=>a>new Date().getTime());return t.length>0?Math.min(...t):null},[w]),W=r.useMemo(()=>d==="All"?l:l.filter(t=>t.category_id===d),[l,d]),q=Math.ceil(W.length/f),z=(c-1)*f,U=W.slice(z,z+f),O=t=>{var a;j(t),(a=document.getElementById("product-grid-section"))==null||a.scrollIntoView({behavior:"smooth",block:"start"})},u=t=>{if(t.status==1||t.qty<=0){_.error(`${t.name} is currently out of stock or unavailable.`);return}if(1>t.qty){_.error(`Cannot add 1 of ${t.name}. Only ${t.qty} in stock.`);return}x(t,1)},m={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}};return e.jsxs("section",{className:"py-16 md:py-24 bg-gray-950 text-white relative overflow-hidden",style:{backgroundImage:`radial-gradient(at 20% 0%, rgba(20,20,50,0.4) 0%, transparent 50%),
                                  radial-gradient(at 80% 100%, rgba(50,20,20,0.4) 0%, transparent 50%)`,backgroundBlendMode:"overlay"},children:[e.jsxs(n.div,{className:"absolute inset-0 pointer-events-none z-0",initial:{opacity:0},animate:{opacity:P||A||C||D||V||$||S?1:0},transition:{duration:1.5,delay:.5},children:[e.jsx("div",{className:"absolute -top-20 -left-20 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl opacity-30"}),e.jsx("div",{className:"absolute -bottom-20 -right-20 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl opacity-30"})]}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[w.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(n.div,{ref:Z,className:"text-center mb-12 md:mb-16",variants:m,initial:"hidden",animate:A?"visible":"hidden",children:[e.jsxs("h2",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold mb-4 drop-shadow-lg leading-tight text-purple-400",children:[e.jsx(ye,{className:"inline-block mr-3 w-10 h-10 align-middle"}),"Flash Sales! Don't Miss Out!"]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"Incredible deals available for a limited time."}),H&&e.jsx("div",{className:"mt-8",children:e.jsx(ge,{targetDate:H})})]}),o?e.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center",children:[e.jsx(h,{className:"w-12 h-12 animate-spin text-purple-400 mb-4"}),e.jsx("p",{className:"text-xl text-gray-400",children:"Loading flash deals..."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4 mb-20",children:w.map((t,a)=>e.jsx(b,{product:t,handleAddToCart:u,inView:A,customDelay:a*.08,isFlashSale:t.is_flash_sale,flashSalePrice:t.flash_sale_price,flashSaleEndsAt:t.flash_sale_ends_at},t.id))}),e.jsx("hr",{className:"my-16 border-gray-800"})]}),B.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(n.div,{ref:ae,className:"text-center mb-12 md:mb-16",variants:m,initial:"hidden",animate:$?"visible":"hidden",children:[e.jsx("h2",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold mb-4 drop-shadow-lg leading-tight text-red-500",children:"Hurry Now! Limited Stock!"}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"These popular items are flying off the shelves. Grab them before they're gone!"})]}),o?e.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center",children:[e.jsx(h,{className:"w-12 h-12 animate-spin text-red-400 mb-4"}),e.jsx("p",{className:"text-xl text-gray-400",children:"Finding hot deals..."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-20",children:B.map((t,a)=>e.jsx(b,{product:t,handleAddToCart:u,inView:$,customDelay:a*.08,isFlashSale:t.is_flash_sale,flashSalePrice:t.flash_sale_price,flashSaleEndsAt:t.flash_sale_ends_at},t.id))}),e.jsx("hr",{className:"my-16 border-gray-800"})]}),M.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(n.div,{ref:te,className:"text-center mb-12 md:mb-16",variants:m,initial:"hidden",animate:D?"visible":"hidden",children:[e.jsxs("h2",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold mb-4 drop-shadow-lg leading-tight text-orange-400",children:[e.jsx("span",{className:"text-white",children:"Customer Favorites:"})," Popular Products"]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"See what everyone else is loving right now."})]}),o?e.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center",children:[e.jsx(h,{className:"w-12 h-12 animate-spin text-orange-400 mb-4"}),e.jsx("p",{className:"text-xl text-gray-400",children:"Finding popular items..."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4 mb-20",children:M.map((t,a)=>e.jsx(b,{product:t,handleAddToCart:u,inView:D,customDelay:a*.08,isFlashSale:t.is_flash_sale,flashSalePrice:t.flash_sale_price,flashSaleEndsAt:t.flash_sale_ends_at},t.id))}),e.jsx("hr",{className:"my-16 border-gray-800"})]}),L.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(n.div,{ref:se,className:"text-center mb-12 md:mb-16",variants:m,initial:"hidden",animate:V?"visible":"hidden",children:[e.jsxs("h2",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold mb-4 drop-shadow-lg leading-tight text-pink-400",children:["Specially ",e.jsx("span",{className:"text-white",children:"Featured"})," For You"]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"Handpicked items our experts recommend."})]}),o?e.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center",children:[e.jsx(h,{className:"w-12 h-12 animate-spin text-pink-400 mb-4"}),e.jsx("p",{className:"text-xl text-gray-400",children:"Curating top picks..."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4 mb-20",children:L.map((t,a)=>e.jsx(b,{product:t,handleAddToCart:u,inView:V,customDelay:a*.08,isFlashSale:t.is_flash_sale,flashSalePrice:t.flash_sale_price,flashSaleEndsAt:t.flash_sale_ends_at},t.id))}),e.jsx("hr",{className:"my-16 border-gray-800"})]}),T.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(n.div,{ref:ee,className:"text-center mb-12 md:mb-16",variants:m,initial:"hidden",animate:C?"visible":"hidden",children:[e.jsxs("h2",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold mb-4 drop-shadow-lg leading-tight text-teal-400",children:["Fresh Off The Truck! ",e.jsx("span",{className:"text-white",children:"New Arrivals"})]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"Discover the latest and greatest tech products just added to our inventory."})]}),o?e.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center",children:[e.jsx(h,{className:"w-12 h-12 animate-spin text-teal-400 mb-4"}),e.jsx("p",{className:"text-xl text-gray-400",children:"Discovering new items..."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4 mb-20",children:T.map((t,a)=>e.jsx(b,{product:t,handleAddToCart:u,inView:C,customDelay:a*.08,isFlashSale:t.is_flash_sale,flashSalePrice:t.flash_sale_price,flashSaleEndsAt:t.flash_sale_ends_at},t.id))}),e.jsx("hr",{className:"my-16 border-gray-800"})]}),e.jsxs(n.div,{ref:X,className:"text-center mb-12 md:mb-16",variants:m,initial:"hidden",animate:P?"visible":"hidden",children:[e.jsxs("h2",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold mb-4 drop-shadow-lg leading-tight",children:["Explore Our ",e.jsx("span",{className:"text-cyan-400",children:"Top Categories"})]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"Find the perfect tech for your needs from our expertly curated selections."})]}),o?e.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center",children:[e.jsx(h,{className:"w-12 h-12 animate-spin text-cyan-400 mb-4"}),e.jsx("p",{className:"text-xl text-gray-400",children:"Loading categories..."})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 mb-20",children:s.filter(t=>t.id!=="All").slice(0,6).map((t,a)=>e.jsx(n.div,{className:"bg-gray-800 rounded-xl overflow-hidden shadow-2xl group relative cursor-pointer transform hover:scale-105 transition-transform duration-300 ease-out border border-transparent hover:border-blue-600 aspect-square flex flex-col justify-end",variants:m,initial:"hidden",animate:P?"visible":"hidden",custom:a,children:e.jsxs(I,{to:`/collections/${t.link||"default-category"}`,className:"block h-full w-full relative",children:[e.jsx("img",{src:t.image||`https://placehold.co/180x180/e0e0e0/555555?text=${t.name}`,alt:t.name,className:"absolute inset-0 w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 ease-out opacity-80 group-hover:opacity-100"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),e.jsxs("div",{className:"p-4 text-left absolute bottom-0 left-0 right-0",children:[e.jsx("h3",{className:"text-lg font-bold text-white group-hover:text-cyan-400 transition-colors duration-300 line-clamp-1",children:t.name}),e.jsxs("div",{className:"inline-flex items-center text-blue-400 hover:text-blue-200 transition-colors duration-300 font-semibold text-sm mt-1",children:["Shop Now",e.jsx(fe,{className:"w-4 h-4 ml-1 transform group-hover:translate-x-1 transition-transform duration-300"})]})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})},t.id))}),e.jsx("hr",{className:"my-16 border-gray-800"}),e.jsxs("div",{id:"product-grid-section",className:"mt-20",children:[e.jsxs(n.div,{ref:le,className:"text-center mb-12 md:mb-16",variants:m,initial:"hidden",animate:S?"visible":"hidden",children:[e.jsxs("h2",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold mb-4 drop-shadow-lg leading-tight",children:["All Our ",e.jsx("span",{className:"text-lime-400",children:"Products"})]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-300 max-w-2xl mx-auto",children:"Browse our extensive catalog of cutting-edge technology."})]}),e.jsx(n.div,{className:"flex flex-wrap justify-center gap-3 mb-12",initial:"hidden",animate:S?"visible":"hidden",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{staggerChildren:.08,delayChildren:.1}}},children:s.map(t=>e.jsx(n.button,{onClick:()=>{v(t.id),j(1)},className:`px-5 py-2 text-sm rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-md
                                    ${d===t.id?"bg-blue-600 text-white shadow-blue-500/50":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,variants:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}},children:t.name},t.id))}),o?e.jsxs("div",{className:"text-center py-20 flex flex-col items-center justify-center",children:[e.jsx(h,{className:"w-12 h-12 animate-spin text-lime-400 mb-4"}),e.jsx("p",{className:"text-xl text-gray-400",children:"Fetching products..."})]}):e.jsxs(e.Fragment,{children:[U.length>0?e.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4",children:U.map((t,a)=>e.jsx(b,{product:t,handleAddToCart:u,inView:S,customDelay:a*.08,isFlashSale:t.is_flash_sale,flashSalePrice:t.flash_sale_price,flashSaleEndsAt:t.flash_sale_ends_at},t.id))}):e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-lg text-gray-400",children:"No products found for this category."})}),q>1&&e.jsxs("div",{className:"flex justify-center items-center mt-12 space-x-2",children:[e.jsx("button",{onClick:()=>O(c-1),disabled:c===1,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),[...Array(q)].map((t,a)=>e.jsx("button",{onClick:()=>O(a+1),className:`px-4 py-2 rounded-lg font-semibold transition-colors
                                                ${c===a+1?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:a+1},a+1)),e.jsx("button",{onClick:()=>O(c+1),disabled:c===q,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]})]})};export{_e as default};
