import{c as C,u as O,r as l,b as d,B as s,j as e,m as c,t as B,y as F,E as G,a2 as w,L as j}from"./main-Hq7ti5zw.js";import{E as A}from"./eye-off-CToJoGRU.js";/**
 * @license lucide-react v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=C("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),H=()=>{document.title="Login - First Digit";const g=O(),[y,p]=l.useState(!1),[N,f]=l.useState(!1),[i,S]=l.useState({email:"",password:""}),[n,o]=l.useState({}),[u,E]=l.useState(!1),h=l.useRef(null);l.useEffect(()=>{const r=document.createElement("script");return r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0,r.onload=()=>{window.google.accounts.id.initialize({client_id:"567469576000-d48rrpf7671lt908lmjctat7avtirh1u.apps.googleusercontent.com",callback:_,auto_select:!1}),h.current&&window.google.accounts.id.renderButton(h.current,{theme:"outline",size:"large",text:"signin_with",width:"100%"})},document.body.appendChild(r),()=>{document.body.removeChild(r)}},[]);const _=async r=>{f(!0);try{const t=await d.post("/api/auth/google",{id_token:r.credential},{headers:{Accept:"application/json"}});t.data.status===200?(localStorage.setItem("auth_token",t.data.token),localStorage.setItem("auth_name",t.data.username),localStorage.setItem("auth_email",t.data.email),localStorage.setItem("role",t.data.role),d.defaults.headers.common.Authorization=`Bearer ${t.data.token}`,s.success(t.data.message||"Logged in with Google successfully!"),t.data.role==="admin"?g("/admin/dashboard"):g("/")):(o(t.data.validation_errors||{}),t.data.validation_errors?Object.values(t.data.validation_errors).forEach(m=>{m.forEach(a=>s.error(a))}):s.error(t.data.message||"An error occurred during Google login."))}catch(t){console.error("Google login error:",t.response||t),t.response&&t.response.data&&t.response.data.message?(s.error(t.response.data.message),o({general:t.response.data.message})):(s.error("Something went wrong with Google login. Please try again later."),o({general:"Network error or unexpected issue."}))}finally{f(!1)}},k=r=>{S({...i,[r.target.name]:r.target.value}),o({})},L=()=>{E(!u)},I=r=>{r.preventDefault(),p(!0);const t={email:i.email,password:i.password};d.get("/sanctum/csrf-cookie").then(m=>{d.post("/api/login",t).then(a=>{a.data.status===200?(localStorage.setItem("auth_token",a.data.token),localStorage.setItem("auth_name",a.data.username),localStorage.setItem("auth_email",a.data.email),localStorage.setItem("role",a.data.role),d.defaults.headers.common.Authorization=`Bearer ${a.data.token}`,s.success(a.data.message),a.data.role==="admin"?g("/admin/dashboard"):g("/")):a.data.status===401?(s.error(a.data.message),o({general:a.data.message})):(o(a.data.validation_errors||{}),a.data.validation_errors?Object.values(a.data.validation_errors).forEach(x=>{x.forEach(b=>s.error(b))}):s.error("An unexpected error occurred."))}).catch(a=>{a.response&&a.response.status===422?(o(a.response.data.validation_errors||{}),Object.values(a.response.data.validation_errors).forEach(x=>{x.forEach(b=>s.error(b))})):a.response&&a.response.data&&a.response.data.message?(s.error(a.response.data.message),o({general:a.response.data.message})):(s.error("Something went wrong. Please try again later."),o({general:"Network error or unexpected issue."}),console.error("Error details:",a.response||a))}).finally(()=>{p(!1)})}).catch(m=>{p(!1),s.error("Failed to prepare login. Please try again later."),o({general:"CSRF token error."}),console.error("CSRF Error:",m)})},z={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},P={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.5,ease:"easeOut",delay:.2}}},v={hidden:{x:-20,opacity:0},visible:{x:0,opacity:1,transition:{duration:.4,ease:"easeOut"}}},R={hover:{scale:1.02,boxShadow:"0px 8px 15px rgba(0, 0, 0, 0.3)"},tap:{scale:.98}};return e.jsxs(c.div,{className:`flex items-center justify-center min-h-screen p-5 pt-24 relative overflow-hidden
                       bg-gradient-to-br from-white to-gray-100
                       dark:bg-gradient-to-br dark:from-gray-950 dark:via-gray-950 dark:to-gray-900`,variants:z,initial:"hidden",animate:"visible",children:[e.jsx("div",{className:"absolute top-[10%] left-[5%] w-72 h-72 bg-cyan-500/10 rounded-full blur-3xl opacity-30 dark:block hidden"}),e.jsx("div",{className:"absolute bottom-[15%] right-[10%] w-80 h-80 bg-purple-500/10 rounded-full blur-3xl opacity-30 dark:block hidden"}),e.jsx("div",{className:"absolute top-[10%] left-[5%] w-72 h-72 bg-pink-200/50 rounded-full blur-3xl opacity-50 dark:hidden block"}),e.jsx("div",{className:"absolute bottom-[15%] right-[10%] w-80 h-80 bg-blue-200/50 rounded-full blur-3xl opacity-50 dark:hidden block"}),e.jsxs(c.div,{className:`p-8 md:p-10 rounded-xl shadow-2xl w-full max-w-md relative z-10
                           bg-white border border-gray-200
                           dark:bg-gray-900 dark:border-gray-700 dark:shadow-2xl`,variants:P,initial:"hidden",animate:"visible",children:[e.jsx("h1",{className:`text-4xl font-extrabold text-center mb-8 drop-shadow-md
                           text-red-900 dark:text-lime-400`,children:"Welcome Back!"}),e.jsx("p",{className:`text-center mb-8 text-lg
                          text-gray-600 dark:text-gray-400`,children:"Log in to continue your shopping journey."}),e.jsxs("form",{onSubmit:I,className:"flex flex-col space-y-6",children:[e.jsxs(c.div,{className:"relative",variants:v,children:[e.jsx(B,{className:`absolute left-4 top-1/2 -translate-y-1/2
                                       text-gray-400 dark:text-gray-500`,size:20}),e.jsx("input",{type:"email",name:"email",placeholder:"Your Email","aria-label":"Email",onChange:k,value:i.email,className:`pl-12 pr-4 py-3 rounded-lg w-full focus:outline-none focus:ring-2 transition-colors
                                       bg-gray-50 border border-gray-300 text-gray-900 placeholder-gray-500 focus:ring-blue-500
                                       dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200 dark:placeholder-gray-500 dark:focus:ring-blue-600`,required:!0}),n.email&&e.jsx("small",{className:"text-red-600 dark:text-red-400 mt-1 block",children:n.email[0]})]}),e.jsxs(c.div,{className:"relative",variants:v,children:[e.jsx(F,{className:`absolute left-4 top-1/2 -translate-y-1/2
                                      text-gray-400 dark:text-gray-500`,size:20}),e.jsx("input",{type:u?"text":"password",name:"password",placeholder:"Your Password","aria-label":"Password",onChange:k,value:i.password,className:`pl-12 pr-12 py-3 rounded-lg w-full focus:outline-none focus:ring-2 transition-colors
                                       bg-gray-50 border border-gray-300 text-gray-900 placeholder-gray-500 focus:ring-blue-500
                                       dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200 dark:placeholder-gray-500 dark:focus:ring-blue-600`,required:!0}),e.jsx("button",{type:"button",onClick:L,className:`absolute right-4 top-1/2 -translate-y-1/2 transition-colors focus:outline-none
                                       text-gray-500 hover:text-gray-700 dark:text-gray-500 dark:hover:text-gray-400`,"aria-label":u?"Hide password":"Show password",children:u?e.jsx(A,{size:20}):e.jsx(G,{size:20})}),n.password&&e.jsx("small",{className:"text-red-600 dark:text-red-400 mt-1 block",children:n.password[0]})]}),n.general&&e.jsx("small",{className:"text-red-600 dark:text-red-400 text-center mt-2 block",children:n.general}),e.jsx(c.button,{type:"submit",className:`flex items-center justify-center font-bold py-3 rounded-lg w-full focus:outline-none focus:ring-2 active:scale-98 shadow-lg
                                   bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500
                                   dark:bg-blue-600 dark:text-white dark:hover:bg-blue-700 dark:focus:ring-blue-500`,disabled:y,variants:R,whileHover:"hover",whileTap:"tap",children:y?e.jsx(w,{}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2",size:20})," Login"]})})]}),e.jsxs("div",{className:"flex items-center my-6",children:[e.jsx("div",{className:`flex-grow border-t
                                    border-gray-300 dark:border-gray-700`}),e.jsx("span",{className:`mx-4
                                    text-gray-500 dark:text-gray-500`,children:"OR"}),e.jsx("div",{className:`flex-grow border-t
                                    border-gray-300 dark:border-gray-700`})]}),e.jsx("div",{className:"flex justify-center",children:N?e.jsx(w,{}):e.jsx("div",{ref:h,className:"w-full"})}),e.jsxs("p",{className:`text-center mt-6
                             text-gray-600 dark:text-gray-400`,children:["Don't have an account?"," ",e.jsx(j,{to:"/register",className:`font-semibold
                                                   text-blue-600 hover:underline
                                                   dark:text-blue-400 dark:hover:underline`,children:"Register Now"})]}),e.jsxs("p",{className:`text-center mt-6
                             text-gray-600 dark:text-gray-400`,children:["Forgot Password?"," ",e.jsx(j,{to:"/forgot-password",className:`font-semibold
                                                   text-blue-600 hover:underline
                                                   dark:text-blue-400 dark:hover:underline`,children:"Reset it here"})]})]})]})};export{H as default};
